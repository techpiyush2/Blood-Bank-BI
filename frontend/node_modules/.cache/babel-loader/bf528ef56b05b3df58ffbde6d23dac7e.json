{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\pk409\\\\OneDrive\\\\Desktop\\\\MERN-Stack-Blood-Bank-master\\\\frontend\\\\src\\\\screens\\\\CommentScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport ReactPaginate from 'react-paginate';\nimport Moment from 'react-moment';\nimport moment from 'moment';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport { listComment, createComment, updateComment, deleteComment } from '../actions/commentActions';\nimport { confirmAlert } from 'react-confirm-alert';\nimport { Confirm } from '../components/Confirm';\n\nconst CommentScreen = () => {\n  _s();\n\n  const [comment, setComment] = useState('');\n  const dispatch = useDispatch();\n  const commentList = useSelector(state => state.commentList);\n  const {\n    comments,\n    error,\n    loading\n  } = commentList;\n  const commentCreate = useSelector(state => state.commentCreate);\n  const {\n    error: errorCreate,\n    loading: loadingCreate,\n    success: successCreate\n  } = commentCreate;\n  const commentUpdate = useSelector(state => state.commentUpdate);\n  const {\n    error: errorUpdate,\n    loading: loadingUpdate,\n    success: successUpdate\n  } = commentUpdate;\n  const commentDelete = useSelector(state => state.commentDelete);\n  const {\n    error: errorDelete,\n    loading: loadingDelete,\n    success: successDelete\n  } = commentDelete;\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n\n  const formCleanHandler = () => {\n    setComment('');\n  };\n\n  useEffect(() => {\n    dispatch(listComment());\n\n    if (successCreate || successUpdate) {\n      formCleanHandler();\n    } // eslint-disable-next-line\n\n  }, [dispatch, successCreate, successUpdate, successDelete]);\n\n  const deleteHandler = id => {\n    confirmAlert(Confirm(() => dispatch(deleteComment(id))));\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(createComment(comment));\n  };\n\n  const editHandler = e => {\n    dispatch(updateComment(e));\n  };\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 5;\n  const indexOfLastItem = currentPage * itemsPerPage;\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n  const currentItems = comments && comments.slice(indexOfFirstItem, indexOfLastItem);\n  const totalItems = comments && Math.ceil(comments.length / itemsPerPage);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal fade\",\n      id: \"editCommentModal\",\n      \"data-bs-backdrop\": \"static\",\n      \"data-bs-keyboard\": \"false\",\n      tabIndex: \"-1\",\n      \"aria-labelledby\": \"editCommentModalLabel\",\n      \"aria-hidden\": \"true\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-dialog\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content modal-background\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"modal-title\",\n              id: \"editCommentModalLabel\",\n              children: \"Add Comment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-close\",\n              \"data-bs-dismiss\": \"modal\",\n              \"aria-label\": \"Close\",\n              onClick: formCleanHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: [successCreate && /*#__PURE__*/_jsxDEV(Message, {\n              variant: \"success\",\n              children: \"Comment Added Successfully\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }, this), loadingCreate ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this) : errorCreate && /*#__PURE__*/_jsxDEV(Message, {\n              variant: \"danger\",\n              children: errorCreate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 32\n            }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 17\n            }, this) : error ? /*#__PURE__*/_jsxDEV(Message, {\n              variant: \"danger\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: submitHandler,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row gy-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"hr\", {\n                  className: \"mt-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"comment\",\n                    children: \"Comment\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    required: true,\n                    name: \"comment\",\n                    type: \"text\",\n                    value: comment,\n                    onChange: e => setComment(e.target.value),\n                    className: \"form-control \",\n                    placeholder: \"Enter comment \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-footer\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"btn btn-secondary\",\n                    \"data-bs-dismiss\": \"modal\",\n                    onClick: formCleanHandler,\n                    children: \"Close\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 141,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    className: \"btn btn-primary\",\n                    children: \"Submit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Comments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-light btn-sm\",\n        \"data-bs-toggle\": \"modal\",\n        \"data-bs-target\": \"#editCommentModal\",\n        children: [' ', /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-plus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), \" ADD NEW COMMENT\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this), successDelete && /*#__PURE__*/_jsxDEV(Message, {\n      variant: \"success\",\n      children: \"Comment Deleted Successfully\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }, this), loadingDelete ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }, this) : errorDelete && /*#__PURE__*/_jsxDEV(Message, {\n      variant: \"danger\",\n      children: errorDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 24\n    }, this), successUpdate && /*#__PURE__*/_jsxDEV(Message, {\n      variant: \"success\",\n      children: \"Comment Updated Successfully\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }, this), loadingUpdate ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }, this) : errorUpdate && /*#__PURE__*/_jsxDEV(Message, {\n      variant: \"danger\",\n      children: errorUpdate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 24\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(Message, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-responsive\",\n        children: [/*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-sm hover bordered striped\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"DATE & TIME\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"COMMENTED BY\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"COMMENT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"APPROVED BY\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: currentItems && currentItems.map(comment => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(Moment, {\n                  format: \"YYYY-MM-DD HH:mm:ss\",\n                  children: moment(comment.createdAt)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: comment.commentedBy && comment.commentedBy.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: comment.comment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: comment.commentApprovedBy ? comment.commentApprovedBy.name : /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-times\",\n                  style: {\n                    color: 'red'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"btn-group\",\n                role: \"group\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-success btn-sm\",\n                  onClick: e => editHandler(comment),\n                  disabled: !comment.active,\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-check\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 25\n                }, this), comment.commentedBy && comment.commentedBy._id === userInfo._id && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger btn-sm\",\n                  onClick: () => deleteHandler(comment._id),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-trash\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 23\n              }, this)]\n            }, comment._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), comments && !loading && comments.length === 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-danger d-flex justify-content-center\",\n          children: \"No data found!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 15\n        }, this), comments.length > itemsPerPage && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(ReactPaginate, {\n            previousLabel: \"previous\",\n            previousClassName: \"page-item\",\n            previousLinkClassName: \"page-link\",\n            nextLabel: \"next\",\n            nextClassName: \"page-item\",\n            nextLinkClassName: \"page-link\",\n            pageClassName: \"page-item\",\n            pageLinkClassName: \"page-link\",\n            activeClassName: \"page-item active\",\n            activeLinkClassName: 'page-link',\n            breakLabel: '...',\n            breakClassName: 'page-item',\n            breakLinkClassName: 'page-link',\n            pageCount: totalItems && totalItems,\n            marginPagesDisplayed: 2,\n            pageRangeDisplayed: 2,\n            onPageChange: e => setCurrentPage(e.selected + 1),\n            containerClassName: 'page pagination'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this)\n    }, void 0, false)]\n  }, void 0, true);\n};\n\n_s(CommentScreen, \"3z9sqB5YcC9LTDjhmABYjXTWLAE=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = CommentScreen;\nexport default CommentScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommentScreen\");","map":{"version":3,"sources":["C:/Users/pk409/OneDrive/Desktop/MERN-Stack-Blood-Bank-master/frontend/src/screens/CommentScreen.js"],"names":["React","useEffect","useState","ReactPaginate","Moment","moment","useDispatch","useSelector","Message","Loader","listComment","createComment","updateComment","deleteComment","confirmAlert","Confirm","CommentScreen","comment","setComment","dispatch","commentList","state","comments","error","loading","commentCreate","errorCreate","loadingCreate","success","successCreate","commentUpdate","errorUpdate","loadingUpdate","successUpdate","commentDelete","errorDelete","loadingDelete","successDelete","userLogin","userInfo","formCleanHandler","deleteHandler","id","submitHandler","e","preventDefault","editHandler","currentPage","setCurrentPage","itemsPerPage","indexOfLastItem","indexOfFirstItem","currentItems","slice","totalItems","Math","ceil","length","target","value","map","createdAt","commentedBy","name","commentApprovedBy","color","active","_id","selected"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport ReactPaginate from 'react-paginate'\nimport Moment from 'react-moment'\nimport moment from 'moment'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Message from '../components/Message'\nimport Loader from '../components/Loader'\nimport {\n  listComment,\n  createComment,\n  updateComment,\n  deleteComment,\n} from '../actions/commentActions'\n\nimport { confirmAlert } from 'react-confirm-alert'\nimport { Confirm } from '../components/Confirm'\n\nconst CommentScreen = () => {\n  const [comment, setComment] = useState('')\n\n  const dispatch = useDispatch()\n  const commentList = useSelector((state) => state.commentList)\n  const { comments, error, loading } = commentList\n\n  const commentCreate = useSelector((state) => state.commentCreate)\n  const {\n    error: errorCreate,\n    loading: loadingCreate,\n    success: successCreate,\n  } = commentCreate\n\n  const commentUpdate = useSelector((state) => state.commentUpdate)\n  const {\n    error: errorUpdate,\n    loading: loadingUpdate,\n    success: successUpdate,\n  } = commentUpdate\n\n  const commentDelete = useSelector((state) => state.commentDelete)\n  const {\n    error: errorDelete,\n    loading: loadingDelete,\n    success: successDelete,\n  } = commentDelete\n\n  const userLogin = useSelector((state) => state.userLogin)\n  const { userInfo } = userLogin\n\n  const formCleanHandler = () => {\n    setComment('')\n  }\n\n  useEffect(() => {\n    dispatch(listComment())\n    if (successCreate || successUpdate) {\n      formCleanHandler()\n    }\n    // eslint-disable-next-line\n  }, [dispatch, successCreate, successUpdate, successDelete])\n\n  const deleteHandler = (id) => {\n    confirmAlert(Confirm(() => dispatch(deleteComment(id))))\n  }\n\n  const submitHandler = (e) => {\n    e.preventDefault()\n    dispatch(createComment(comment))\n  }\n\n  const editHandler = (e) => {\n    dispatch(updateComment(e))\n  }\n\n  const [currentPage, setCurrentPage] = useState(1)\n\n  const itemsPerPage = 5\n  const indexOfLastItem = currentPage * itemsPerPage\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage\n  const currentItems =\n    comments && comments.slice(indexOfFirstItem, indexOfLastItem)\n  const totalItems = comments && Math.ceil(comments.length / itemsPerPage)\n\n  return (\n    <>\n      <div\n        className='modal fade'\n        id='editCommentModal'\n        data-bs-backdrop='static'\n        data-bs-keyboard='false'\n        tabIndex='-1'\n        aria-labelledby='editCommentModalLabel'\n        aria-hidden='true'\n      >\n        <div className='modal-dialog'>\n          <div className='modal-content modal-background'>\n            <div className='modal-header'>\n              <h5 className='modal-title' id='editCommentModalLabel'>\n                Add Comment\n              </h5>\n              <button\n                type='button'\n                className='btn-close'\n                data-bs-dismiss='modal'\n                aria-label='Close'\n                onClick={formCleanHandler}\n              ></button>\n            </div>\n            <div className='modal-body'>\n              {successCreate && (\n                <Message variant='success'>Comment Added Successfully</Message>\n              )}\n              {loadingCreate ? (\n                <Loader />\n              ) : (\n                errorCreate && <Message variant='danger'>{errorCreate}</Message>\n              )}\n\n              {loading ? (\n                <Loader />\n              ) : error ? (\n                <Message variant='danger'>{error}</Message>\n              ) : (\n                <form onSubmit={submitHandler}>\n                  <div className='row gy-2'>\n                    <hr className='mt-0' />\n\n                    <div className='form-group'>\n                      <label htmlFor='comment'>Comment</label>\n                      <input\n                        required\n                        name='comment'\n                        type='text'\n                        value={comment}\n                        onChange={(e) => setComment(e.target.value)}\n                        className='form-control '\n                        placeholder='Enter comment '\n                      />\n                    </div>\n\n                    <div className='modal-footer'>\n                      <button\n                        type='button'\n                        className='btn btn-secondary'\n                        data-bs-dismiss='modal'\n                        onClick={formCleanHandler}\n                      >\n                        Close\n                      </button>\n                      <button type='submit' className='btn btn-primary'>\n                        Submit\n                      </button>\n                    </div>\n                  </div>\n                </form>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className='d-flex justify-content-between'>\n        <h1>Comments</h1>\n        <button\n          className='btn btn-light btn-sm'\n          data-bs-toggle='modal'\n          data-bs-target='#editCommentModal'\n        >\n          {' '}\n          <i className='fas fa-plus'></i> ADD NEW COMMENT\n        </button>\n      </div>\n\n      {successDelete && (\n        <Message variant='success'>Comment Deleted Successfully</Message>\n      )}\n      {loadingDelete ? (\n        <Loader />\n      ) : (\n        errorDelete && <Message variant='danger'>{errorDelete}</Message>\n      )}\n      {successUpdate && (\n        <Message variant='success'>Comment Updated Successfully</Message>\n      )}\n      {loadingUpdate ? (\n        <Loader />\n      ) : (\n        errorUpdate && <Message variant='danger'>{errorUpdate}</Message>\n      )}\n      {loading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant='danger'>{error}</Message>\n      ) : (\n        <>\n          <div className='table-responsive'>\n            <table className='table table-sm hover bordered striped'>\n              <thead>\n                <tr>\n                  <th>DATE & TIME</th>\n                  <th>COMMENTED BY</th>\n                  <th>COMMENT</th>\n                  <th>APPROVED BY</th>\n                  <th></th>\n                </tr>\n              </thead>\n              <tbody>\n                {currentItems &&\n                  currentItems.map((comment) => (\n                    <tr key={comment._id}>\n                      <td>\n                        <Moment format='YYYY-MM-DD HH:mm:ss'>\n                          {moment(comment.createdAt)}\n                        </Moment>\n                      </td>\n                      <td>{comment.commentedBy && comment.commentedBy.name}</td>\n                      <td>{comment.comment}</td>\n                      <td>\n                        {comment.commentApprovedBy ? (\n                          comment.commentApprovedBy.name\n                        ) : (\n                          <i\n                            className='fas fa-times'\n                            style={{ color: 'red' }}\n                          ></i>\n                        )}\n                      </td>\n\n                      <td className='btn-group' role='group'>\n                        <button\n                          className='btn btn-success btn-sm'\n                          onClick={(e) => editHandler(comment)}\n                          disabled={!comment.active}\n                        >\n                          <i className='fas fa-check'></i>\n                        </button>\n\n                        {comment.commentedBy &&\n                          comment.commentedBy._id === userInfo._id && (\n                            <button\n                              className='btn btn-danger btn-sm'\n                              onClick={() => deleteHandler(comment._id)}\n                            >\n                              <i className='fas fa-trash'></i>\n                            </button>\n                          )}\n                      </td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n            {comments && !loading && comments.length === 0 && (\n              <span className='text-danger d-flex justify-content-center'>\n                No data found!\n              </span>\n            )}\n            {comments.length > itemsPerPage && (\n              <div className='d-flex justify-content-center'>\n                <ReactPaginate\n                  previousLabel='previous'\n                  previousClassName='page-item'\n                  previousLinkClassName='page-link'\n                  nextLabel='next'\n                  nextClassName='page-item'\n                  nextLinkClassName='page-link'\n                  pageClassName='page-item'\n                  pageLinkClassName='page-link'\n                  activeClassName='page-item active'\n                  activeLinkClassName={'page-link'}\n                  breakLabel={'...'}\n                  breakClassName={'page-item'}\n                  breakLinkClassName={'page-link'}\n                  pageCount={totalItems && totalItems}\n                  marginPagesDisplayed={2}\n                  pageRangeDisplayed={2}\n                  onPageChange={(e) => setCurrentPage(e.selected + 1)}\n                  containerClassName={'page pagination'}\n                />\n              </div>\n            )}\n          </div>\n        </>\n      )}\n    </>\n  )\n}\n\nexport default CommentScreen\n"]},"metadata":{},"sourceType":"module"}